<?xml version="1.0"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
	>
	
<ui:composition template="_template2.xhtml">

	<ui:define name="titulo">
		<title>Tio Phil Delivery - Produtos</title>
	</ui:define>
	
	<ui:define name="conteudo">
		    
		    <div class="container">
		      
		      <div class="page-header">
		        <h1>Inserir Produto</h1>
		         <h:messages id ="msg"/>
		      </div>
		      
		      <h:form>
					
						
						<div class="form-group">         
              	<h:outputText value="Nome" for="nome" />
				<h:inputText id="nome" value="#{produtoController.produto.nome}" />
				<h:outputText value="Valor" for="valor" />
				<h:inputText id="valor" value="#{produtoController.produto.valor}" />
				<h:outputText value="Tamanho" for="tamanho" />
				<h:inputText id="tamanho" value="#{produtoController.produto.tamanho}" />	
				
		        <h:outputText value="Selecione um tipo" for ="tipo"/>
		        <h:selectOneMenu id="tipo" value="#{produtoController.tipoId}" required="true" requiredMessage="Tipo Obrigatorio">
		        <f:selectItem itemLabel = "Selecionar" noSelectionOption="true"/>
		        <f:selectItems value ="#{produtoController.todosTipos}" var = "tipo" itemLabel="#{tipo.tipo}"
		          itemValue="#{tipo.id}"/>
		        </h:selectOneMenu>			
				        
		              </div>
					
			
					<fieldset>
						<legend>Ingredientes</legend>
						<h:panelGrid columns="3">
							<h:outputText for="ingrediente" />
							<h:selectOneMenu id="ingrediente" value="#{produtoController.ingId}">
					        <f:selectItem itemLabel="Selecionar" noSelectionOption="true" />
					        <f:selectItems value="#{produtoController.todosIngredientes}" var="ingrediente" itemLabel="#{ingrediente.nome}" itemValue="#{ingrediente.id}" />
				            </h:selectOneMenu>
			
							<h:commandButton value="Colocar Ingrediente"  action ="#{produtoController.gravarIngrediente}"/>
							
							
							<h:dataTable value = "#{produtoController.ingredientesProduto}" var = "ingrediente">
							
							<h:column>
							<f:facet name="header"></f:facet>
						    <h:outputText value="#{ingrediente.nome}"/>
						    </h:column>
						    <f:facet name="header"></f:facet>
						    <h:column>
							<h:commandButton type="submit" class="btn btn-danger btn-sm" value="Remover Ingrediente" action="#{produtoController.remover(ingrediente)}"/>
							</h:column>
							</h:dataTable>
						</h:panelGrid>
						
						
					</fieldset>
					<br/>
					<h:commandButton type="submit" class="btn btn-success btn-block" value="Cadastrar Pizza" action="#{produtoController.gravar}"/>
				</h:form>
				
				<div class="page-header"></div>  <!-- TraÃ§o -->
		
		      <h2>Produtos Cadastrados:</h2>
			 <h:form>
			    <h:dataTable value="#{produtoController.todosProdutos}" var="produto">
				
			    <h:column>
			    <f:facet name="header">Nome </f:facet>
			    <h:outputText value="#{produto.nome}"/>
			    </h:column>


			    <h:column>
			    <f:facet name="header">Alterar</f:facet>
			    <h:commandButton type="submit" class="btn btn-success btn-sm" value="Alterar Produto" 
			    			action="#{produtoController.carregar(produto)}">
		        </h:commandButton>
			   	</h:column>

			    <h:column>
			    <f:facet name="header">Remover</f:facet>
			    <h:commandButton type="submit" class="btn btn-danger btn-sm" value="Remover Produto" 
			    			action="#{produtoController.remover(produto)}">
		        </h:commandButton>
			    </h:column>
			    	   
			    
			    </h:dataTable>
		      	</h:form>
		      
		      
		    </div>
	
			<br/>
		    
		</ui:define>
	
	</ui:composition>		    
</html>


	