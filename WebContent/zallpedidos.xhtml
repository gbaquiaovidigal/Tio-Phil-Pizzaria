<?xml version="1.0"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
	>
	
	<ui:composition template="_template2.xhtml">

		<ui:define name="titulo">
			<title>Tio Phil Delivery - Pedido</title>
		</ui:define>
		
		<ui:define name="conteudo">

			<div class="container">
		      
		      <div class="page-header">
		        

				

		
		     <h2>Historio de Pedidos:</h2>
			 
				<div class="row">
					<div class="col">
						<h:form>
								<h:dataTable style="background-color: #F2F5A9" class="table table-striped" value="#{pedidoController.todosPedidos}" var="pedido">
									
<h:column>
				<f:facet name="header">Cliente</f:facet>
				<h:outputText value="#{pedido.pessoa.nome}"/>
			</h:column>
			
			<h:column>
				<f:facet name="header">Rua</f:facet>
				<h:outputText value="#{pedido.end.rua}"/>
			</h:column>
			
			
			<h:column>
				<f:facet name="header">Bairro</f:facet>
				<h:outputText value="#{pedido.end.bairro}"/>
			</h:column>
			
			
			<h:column>
				<f:facet name="header">Numero</f:facet>
				<h:outputText value="#{pedido.end.numero}"/>
			</h:column>
			
						
									<h:column>
										<f:facet name="header">Data</f:facet>
										<h:outputText value="#{pedido.data.time}">
											<f:convertDateTime pattern="dd/MM/yyyy HH:mm" timeZone="America/Sao_Paulo" />
										</h:outputText>
									</h:column>
												
									<h:column>
										<f:facet name="header">Valor (R$)</f:facet>
										<h:outputText value="#{pedido.valor}"/>
									</h:column>
									
									
									
																		
																		
				
									<p:dataList value="#{pedidoController.itensDoPedido(pedido)}" var="produto" type="ordered" >
									        <f:facet name="header">
									            Basic
									        </f:facet>
									        #{produto.nome}, #{produto.valor}
           
     
								
									
									
									</p:dataList>
							
									
						    
									
									
									<h:column>
									<f:facet name="header">Mostrar</f:facet>
										<h:commandButton type="submit" class="btn btn-danger btn-sm" value="Exibir Pedido" action="#{pedidoController.exibir(pedido)}"/>
									</h:column>	    
									
							       
				
 	   
							    
							    </h:dataTable>
							    

						</h:form>
					</div>
				</div>
			 </div>
			 </div>

		 <br/>
			    
		</ui:define>
		
	</ui:composition>	    
		  
</html>