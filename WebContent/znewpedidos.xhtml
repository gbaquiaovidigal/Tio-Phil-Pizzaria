<?xml version="1.0"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
	>
	
	<ui:composition template="_template2.xhtml">

		<ui:define name="titulo">
			<title>Tio Phil Delivery - Pedido</title>
		</ui:define>
		
		<ui:define name="conteudo">

			<div class="container">
		      
		      <div class="page-header">
		        <h1>Novos Pedidos</h1>

				

		
		     <h2>Pedidos em Espera:</h2>
			 
				<div class="row">
					<div class="col">
						<h:form>
								<h:dataTable style="background-color: #F2F5A9" class="table table-striped" value="#{pedidoController.pedidosAtivos}" var="pedido">
									
<h:column>
				<f:facet name="header">Cliente</f:facet>
				<h:outputText value="#{pedido.pessoa.nome}"/>
			</h:column>
			
			<h:column>
				<f:facet name="header">Rua</f:facet>
				<h:outputText value="#{pedido.end.rua}"/>
			</h:column>
			
			
			<h:column>
				<f:facet name="header">Bairro</f:facet>
				<h:outputText value="#{pedido.end.bairro}"/>
			</h:column>
			
			
			<h:column>
				<f:facet name="header">Numero</f:facet>
				<h:outputText value="#{pedido.end.numero}"/>
			</h:column>
			
						
									<h:column>
										<f:facet name="header">Data</f:facet>
										<h:outputText value="#{pedido.data.time}">
											<f:convertDateTime pattern="dd/MM/yyyy HH:mm" timeZone="America/Sao_Paulo" />
										</h:outputText>
									</h:column>
												
									<h:column>
										<f:facet name="header">Valor (R$)</f:facet>
										<h:outputText value="#{pedido.valor}"/>
									</h:column>
									
									<h:column>
										<f:facet name="header">Troco para :</f:facet>
										<h:outputText value="#{pedido.troco}"/>
									</h:column>
									
									<h:column>
										<f:facet name="header">Observações</f:facet>
										<h:outputText value="#{pedido.obs}"/>
									</h:column>
									
									
									
																		
																		
				
							
									
									<h:column>
									<f:facet name="header">Finalizar</f:facet>
										<h:commandButton type="submit" class="btn btn-danger btn-sm" value="Finalizar Pedido" action="#{pedidoController.finalizar(pedido)}"/>
									</h:column>	    
									
									
									<h:column>
									<f:facet name="header">Mostrar</f:facet>
										<h:commandButton class="btn btn-danger btn-sm" value="Exibir Pedido"  
										action="#{pedidoController.exibir(pedido)}"  />
									</h:column>	
						
  
									
							       
				
 	   
							    
							    </h:dataTable>
							    <h2>Detalhes do Pedido:</h2>
							    
<h:dataTable style="background-color: #F2F5A9" class="table table-striped" value="#{pedidoController.itensdoPedido}" var="item" rendered="#{pedidoController.mostrarItens()}">
									
<h:column>
				<f:facet name="header">Produto</f:facet>
				<h:outputText value="#{item.produto.nome}"/>
			</h:column>
			
			<h:column>
				<f:facet name="header">Quantidade</f:facet>
				<h:outputText value="#{item.qtde}"/>
			</h:column>
			</h:dataTable>
							    <!-- Button trigger modal
							    <button type="button" class="btn btn-primary"  data-toggle="modal" data-target="#exampleModal" >
                                    Launch demo modal
                                    </button> -->


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Itens do Pedido</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">fsdf;</span>
          
          <h:form>
          
         
								<h:dataTable style="background-color: #F2F5A9" class="table table-striped" value="#{pedidoController.pedidosAtivos}" var="pedido">
									
<h:column>
				<f:facet name="header">Cliente</f:facet>
				<h:outputText value="#{pedido.pessoa.nome}"/>
			</h:column>
			
			<h:column>
				<f:facet name="header">Rua</f:facet>
				<h:outputText value="#{pedido.end.rua}"/>
			</h:column>
			
			
			<h:column>
				<f:facet name="header">Bairro</f:facet>
				<h:outputText value="#{pedido.end.bairro}"/>
			</h:column>
			
			
			<h:column>
				<f:facet name="header">Numero</f:facet>
				<h:outputText value="#{pedido.end.numero}"/>
			</h:column>
          </h:dataTable>
          </h:form>
        </button>
        
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
							    

						</h:form>
					</div>
				</div>
			 </div>
			 </div>

		 <br/>
			    
		</ui:define>
		
	</ui:composition>	    
		  
</html>